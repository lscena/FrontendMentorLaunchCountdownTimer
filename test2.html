<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <link rel="stylesheet" href="styleTest.css">

    <!-- Font: -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Red+Hat+Text:wght@700&display=swap" rel="stylesheet">
</head>
<body>
    
    <main>    
        <div class="esteticaYFuncional">

            <div class="l1">
                <div class="circleLeft"></div>
                <div class="circleRight"></div>
                <div class="second sup">
                    <span class="second number supNum moving">00</span>        
                    <span class="second number supNum new">02</span>  

                </div>
                <div class="second inf">
                    <span class="second number infNum moving">00</span>        
                    <span class="second number infNum new">02</span>  
                </div>
            </div>

        </div>

        <div class="esteticaYFuncional">

            <div class="l1">
                <div class="circleLeft"></div>
                <div class="circleRight"></div>
                <div class="minute sup">
                    <span class="minute number supNum moving">00</span>        
                    <span class="minute number supNum new">02</span>  

                </div>
                <div class="minute inf">
                    <span class="minute number infNum moving">00</span>        
                    <span class="minute number infNum new">02</span>  
                </div>
            </div>

        </div>

        <div class="esteticaYFuncional">

            <div class="l1">
                <div class="circleLeft"></div>
                <div class="circleRight"></div>
                <div class="hour sup">
                    <span class="hour number supNum moving">00</span>        
                    <span class="hour number supNum new">02</span>  

                </div>
                <div class="hour inf">
                    <span class="hour number infNum moving">00</span>        
                    <span class="hour number infNum new">02</span>  
                </div>
            </div>

        </div>

        <div class="esteticaYFuncional">

            <div class="l1">
                <div class="circleLeft"></div>
                <div class="circleRight"></div>
                <div class="day sup">
                    <span class="day number supNum moving">14</span>        
                    <span class="day number supNum new">02</span>  

                </div>
                <div class="day inf">
                    <span class="day number infNum moving">14</span>        
                    <span class="day number infNum new">02</span>  
                </div>
            </div>

        </div>



    </main>
</body>

<script>
setInterval(myTimer, 1000);
const objCounters={
    ".second":{
        'queryS':".second",
        'min':0,
        'max':60,
        'delta':-1,
        'nextQueryS':'.minute',
    },
    ".minute":{
        'queryS':".minute",
        'min':0,
        'max':60,
        'delta':-1,
        'nextQueryS':'.hour',
    },
    ".hour":{
        'queryS':".hour",
        'min':0,
        'max':24,
        'delta':-1,
        'nextQueryS':'.day',
    },
    ".day":{
        'queryS':".day",
        'min':0,
        'max':14,
        'delta':-1,
        'nextQueryS':'',
    },
};

// console.log(objCounters['.second']['nextQueryS']);

function myTimer() {
    modificar(
        queryS=objCounters['.second']['queryS'],
        min=objCounters['.second']['min'],
        max=objCounters['.second']['max'],
        delta=objCounters['.second']['delta'],
    );    
}
function modificar(queryS=".second",min=0,max=60,delta=1){
    const querySWithouthDot=queryS.slice(1,queryS.length);

    // Container element:
    const containerSupEl=document.querySelector(queryS+'.sup'); //en caso de haber muchos, toma el primero.
    const containerInfEl=document.querySelector(queryS+'.inf'); //en caso de haber muchos, toma el primero.

    const secondSupOldEl=document.querySelector(queryS+'.supNum.old'); //en caso de haber muchos, toma el primero.    
    const secondInfOldEl=document.querySelector(queryS+'.infNum.old'); //en caso de haber muchos, toma el primero.    
    if (secondSupOldEl){
        // Elimino el elemento
        secondSupOldEl.remove();        
    };
    if (secondInfOldEl){
        // Elimino el elemento
        secondInfOldEl.remove();
    };

    const secondSupMovingEl=document.querySelector(queryS+'.supNum.moving'); //en caso de haber muchos, toma el primero.
    const secondInfMovingEl=document.querySelector(queryS+'.infNum.moving'); //en caso de haber muchos, toma el primero.
    secondSupMovingEl.classList.add("old");
    secondInfMovingEl.classList.add("old");
    secondSupMovingEl.classList.remove("moving");
    secondInfMovingEl.classList.remove("moving");

    const secondSupNewEl=document.querySelector(queryS+'.supNum.new'); //en caso de haber muchos, toma el primero.
    const secondInfNewEl=document.querySelector(queryS+'.infNum.new'); //en caso de haber muchos, toma el primero.
    
    const nextValueTxt=nextValue(previousValue=secondSupMovingEl.innerHTML,min=min,max=max,delta=delta,queryS=queryS);
    secondSupNewEl.innerHTML=nextValueTxt;
    secondInfNewEl.innerHTML=nextValueTxt;
    secondSupNewEl.classList.add("moving");
    secondInfNewEl.classList.add("moving");
    secondSupNewEl.classList.remove("new");
    secondInfNewEl.classList.remove("new");

    const creationSupEl = document.createElement('span');     
    creationSupEl.classList.add(querySWithouthDot,"number","new","supNum")
    containerSupEl.appendChild(creationSupEl);

    const creationInfEl = document.createElement('span');     
    creationInfEl.classList.add(querySWithouthDot,"number","new","infNum")
    containerInfEl.appendChild(creationInfEl);

};
function nextValue(previousValue,min=0,max=60,delta=1,queryS){
    // para debug:
    // console.log(previousValue);

    let nextV=parseInt(previousValue)+delta;
    let jump=false;

    if (delta>0){
        if (nextV>=max){
            nextV=0;
            jump=true;
        };        
    } else {
        if (nextV<min){
            nextV=max+delta;
            jump=true;
        }; 
    };

    if (jump){
        const nextQueryS=objCounters[queryS]['nextQueryS'];
        if (nextQueryS!==''){
            modificar(
                queryS=objCounters[nextQueryS]['queryS'],
                min=objCounters[nextQueryS]['min'],
                max=objCounters[nextQueryS]['max'],
                delta=objCounters[nextQueryS]['delta'],
            );
        };
    };

    if (nextV<10 && nextV>-10){
        if (nextV<0){
            nextV='-0'+Math.abs(nextV);
        } else {
            nextV='0'+nextV;
        };
    };

    return nextV;
};
</script>
</html>